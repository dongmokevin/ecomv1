{% load static %} {% include 'main.html' %} {% block content %}
<!-- BREADCRUMB -->
<nav class="py-5">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <!-- Breadcrumb -->
        <ol class="breadcrumb mb-0 font-size-xs text-gray-400">
          <li class="breadcrumb-item">
            <a class="text-gray-400" href="{% url 'core:home' %}">Home</a>
          </li>
          <li class="breadcrumb-item">
            <a class="text-gray-400" href="{% url 'core:store' %}">Store</a>
          </li>
          <li class="breadcrumb-item active">{{ product.name }}</li>
        </ol>
      </div>
    </div>
  </div>
</nav>

<!-- PRODUCT -->
<section>
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="row">
          <div class="col-12 col-md-6">
            <!-- Card -->
            <div class="card">
              <!-- Slider -->
              <a href="" x>
                <img
                  src="{{product.imageURL}}"
                  alt="Yooo."
                  class="card-img-top"
                />
              </a>
            </div>
          </div>
          <div class="col-12 col-md-6 pl-lg-10">
            <!-- Heading -->
            <h3 class="mb-2">{{ product.name }}</h3>

            <!-- Price -->
            <div class="mb-7">
              <span class="ml-1 font-size-h5 font-weight-bolder text-primary"
                >&#8383;{{product.price}}</span
              >
            </div>

            <!-- Form -->
            <form>
              <div class="form-group">
                <!-- Label -->
                <p class="mb-5">
                  Generic name:
                  <strong id="colorCaption">{{product.generic_name}}</strong>
                </p>
              </div>
              <div class="form-group">
                <div class="form-row mb-7">
                  <div class="col-12 col-lg-auto">
                    <!-- Quantity -->
                    <label for="select">Qty</label>
                    <select id="select">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">5</option>
                    </select>
                  </div>

                  <div class="col-12 col-lg-auto"></div>
                </div>
                <div class="col-12 col-lg">
                  <!-- Submit -->
                  <button
                    type="button"
                    id="add-button"
                    value="{{product.id}}"
                    class="btn btn-block btn-dark mb-2"
                  >
                    Add to Cart <i class="fe fe-shopping-cart ml-2"></i>
                  </button>
                </div>
              </div>
            </form>

            <!-- Link -->
            <a
              class="btn btn-link btn-sm px-0 text-body"
              href="{% url 'basket:basket_summary' %}"
            >
              <i class="fe fe-arrow-right mr-2"></i> Proceed to Overview
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- DESCRIPTION -->
<section class="py-11">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <!-- Nav -->
        <div
          class="nav nav-tabs nav-overflow justify-content-start justify-content-md-center"
        >
          <a class="nav-link active" data-toggle="tab" href="#descriptionTab">
            Description
          </a>
        </div>

        <!-- Content -->
        <div class="tab-content">
          <div class="tab-pane fade show active" id="descriptionTab">
            <div class="row justify-content-center py-9 border mt-3">
              <div class="col-12 col-lg-10 col-xl-8">
                <div class="row">
                  <div class="col-12">
                    <!-- Text -->
                    <p class="text-gray-500">{{ product.decription }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer
  class="bg-dark bg-cover @@classList"
  style="background-image: url(./assets/img/patterns/pattern-2.svg)"
>
  <div class="py-6">
    <div class="container">
      <div class="row">
        <div class="col">
          <!-- Copyright -->
          <p class="mb-3 mb-md-0 font-size-xxs text-muted">
            Â© 2021 All rights reserved. Yaounde Market.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
  $(document).on("click", "#add-button", function (e) {
    e.preventDefault();
    $.ajax({
      type: "POST",
      url: '{% url "basket:basket_add" %}',
      data: {
        productid: $("#add-button").val(),
        productqty: $("#select option:selected").text(),
        csrfmiddlewaretoken: "{{csrf_token}}",
        action: "post",
      },
      success: function (json) {
        document.getElementById("basket-qty").innerHTML = json.qty;
      },
      error: function (xhr, errmsg, err) {},
    });
  });
</script>
{% endblock %}
